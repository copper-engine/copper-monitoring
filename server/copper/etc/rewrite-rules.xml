<?xml version="1.0"?>
<!DOCTYPE Configure PUBLIC "-//Jetty//Configure//EN" "http://www.eclipse.org/jetty/configure_9_3.dtd">

<Configure id="Server" class="org.eclipse.jetty.server.Server">

    <Ref refid="Rewrite">

        <Call name="addRule">
            <Arg>
                <New class="org.eclipse.jetty.rewrite.handler.RewritePatternRule">
                    <Set name="pattern">/static/*</Set>
                    <Set name="replacement">/static/</Set>
                    <Set name="terminating">true</Set>
                </New>
            </Arg>
        </Call>
        <Call name="addRule">
            <Arg>
                <New class="org.eclipse.jetty.rewrite.handler.RewritePatternRule">
                    <Set name="pattern">/error.html</Set>
                    <Set name="replacement">/error.html</Set>
                    <Set name="terminating">true</Set>
                </New>
            </Arg>
        </Call>

        <Call name="addRule">
            <Arg>
                <New class="org.eclipse.jetty.rewrite.handler.RewritePatternRule">
                    <Set name="pattern">/api/*</Set>
                    <Set name="replacement">/api/</Set>
                    <Set name="terminating">true</Set>
                </New>
            </Arg>
        </Call>
        <Call name="addRule">
            <Arg>
                <New class="org.eclipse.jetty.rewrite.handler.RewritePatternRule">
                    <Set name="pattern">/monitoring-gui/*</Set>
                    <Set name="replacement">/monitoring-gui/</Set>
                    <Set name="terminating">true</Set>
                </New>
            </Arg>
        </Call>

        <Call name="addRule">
            <Arg>
                <New class="org.eclipse.jetty.rewrite.handler.RewriteRegexRule">
                    <Set name="regex">/(.*)</Set>
                    <Set name="replacement">/index.html?$1</Set>
                </New>
            </Arg>
        </Call>
    </Ref>
</Configure>