webpackJsonp([7],{"./src/dependency-injection.ts":function(e,t,n){"use strict";var o=n("./node_modules/vue/dist/vue.esm.js"),r=n("./node_modules/vue-container/dist/vuec.js"),s=n.n(r),i=n("./src/services/jmxService.ts");o.default.use(s.a),o.default.$ioc.register("jmxService",new i.a),o.default.$ioc.register("eventHub",new o.default)},"./src/main.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/vue/dist/vue.esm.js"),r=n("./node_modules/vuetify/dist/vuetify.js"),s=n.n(r),i=(n("./src/util/hot-reload.ts"),n("./src/router.ts")),a=(n("./src/dependency-injection.ts"),n("./src/store.vuex.ts")),u=n("./node_modules/vuetify/dist/vuetify.css"),c=(n.n(u),n("./node_modules/mdi/css/materialdesignicons.min.css"));n.n(c);o.default.use(n("./node_modules/vue-moment/vue-moment.js")),o.default.use(s.a);var d=function(){return n.e(0).then(n.bind(null,"./src/components/dashboard/index.ts")).then(function(e){return e.DashboardComponent})},l=function(){return n.e(5).then(n.bind(null,"./src/components/core/notifications/index.ts")).then(function(e){return e.NotificationsComponent})};window.app=new o.default({el:"#app-main",store:a.a,router:Object(i.a)(),components:{dashboard:d,notifications:l}})},"./src/models/connectionSettings.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var o=function(){function e(e,t,n,o){void 0===e&&(e="localhost"),void 0===t&&(t=1099),void 0===n&&(n=5),void 0===o&&(o=10),this.host=e,this.port=t,this.fetchPeriod=n,this.updatePeriod=o}return e}()},"./src/models/engine.ts":function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return r});var o;!function(e){e[e.RAW=0]="RAW",e[e.ENQUEUED=1]="ENQUEUED",e[e.DEQUEUED=2]="DEQUEUED",e[e.RUNNING=3]="RUNNING",e[e.WAITING=4]="WAITING",e[e.FINISHED=5]="FINISHED",e[e.ERROR=6]="ERROR",e[e.INVALID=7]="INVALID"}(o||(o={}));var r=function(){function e(e,t,n,o,r,s,i){this.runningSince=e,this.lastProcessing=t,this.engineId=n,this.type=o,this.instances=r,this.state=s,this.brokenWFCount=i}return e}();(function(){function e(e,t,n,o,r,s,i,a,u,c,d){this.id=e,this.state=t,this.priority=n,this.processorPoolId=o,this.timeout=r,this.workflowClassInfo=s,this.dataAsString=i,this.lastWaitStackTrace=a,this.errorData=u,this.lastModTS=c,this.creationTS=d}})(),function(){function e(e,t,n,o,r,s,i){this.classname=e,this.alias=t,this.majorVersion=n,this.minorVersion=o,this.patchLevel=r,this.serialversionuid=s,this.sourceCode=i}}(),function(){function e(e,t){this.errorTS=e,this.exceptionStackTrace=t}}()},"./src/router.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n("./node_modules/vue/dist/vue.esm.js"),r=n("./node_modules/vue-router/dist/vue-router.esm.js"),s=(n("./src/util/hot-reload.ts"),function(){return n.e(3).then(n.bind(null,"./src/components/examples/about/index.ts")).then(function(e){return e.AboutComponent})}),i=function(){return n.e(4).then(n.bind(null,"./src/components/examples/list/index.ts")).then(function(e){return e.ListComponent})},a=function(){return n.e(0).then(n.bind(null,"./src/components/dashboard/index.ts")).then(function(e){return e.DashboardComponent})},u=function(){return n.e(1).then(n.bind(null,"./src/components/dashboard/workflows/index.ts")).then(function(e){return e.WorkflowsComponent})};o.default.use(r.a);var c=function(){return[{path:"/",component:a},{path:"/about",component:s},{path:"/list",component:i},{path:"/dashboard",component:a,children:[{path:"workflows",component:u}]}]},d=function(){return new r.a({mode:"history",routes:c()})}},"./src/services/jmxService.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var o=n("./node_modules/axios/index.js"),r=n.n(o),s=n("./src/models/engine.ts"),i=function(){function e(){var e=this;this.buildRestartAllRequest=function(t){return[e.createJmxExecRequest(t,{operation:"restartAll()",arguments:[]})]},this.parseVoidResponse=function(e){if(!e||!e.data||e.data.length<1||e.data[0].error)throw new Error("invalid response!");return console.log("Restart Response",e),200===e.data[0].status},this.parseEngineStatusResponse=function(t){if(console.log(t),!t||!t.data||t.data.length<3||!e.isSubResponseValid(t.data[0])||!e.isSubResponseValid(t.data[1])||!e.isSubResponseValid(t.data[2]))throw new Error("invalid response!");return new s.a(t.data[1].value.startupTS,t.data[1].value.lastActivityTS,t.data[0].value.EngineId,t.data[0].value.EngineType,t.data[1].value.countWfiLastNMinutes,t.data[0].value.State.toLowerCase(),t.data[2].value)},this.parseBrokenWorkflowsResponse=function(t){if(!t||!t.data||t.data.length<1||!e.isSubResponseValid(t.data[0]))throw new Error("invalid response!");return t.data[0].value}}return e.prototype.getEngineStatus=function(e){return r.a.post(Object({ENV:"production",NODE_ENV:"production",DEBUG_MODE:!1,API_KEY:"XXXX-XXXXX-XXXX-XXXX"}).API_NAME,[this.createEngineInfoRequest(e),this.createEngineActivityRequest(e),this.createCountBrokenWFRequest(e)]).then(this.parseEngineStatusResponse).catch(function(e){console.error("Error fetching Engine Status:",e)})},e.prototype.getBrokenWorkflows=function(e,t,n){return void 0===t&&(t=50),void 0===n&&(n=0),r.a.post(Object({ENV:"production",NODE_ENV:"production",DEBUG_MODE:!1,API_KEY:"XXXX-XXXXX-XXXX-XXXX"}).API_NAME,[this.createQueryBrokenWFRequest(e,t,n)]).then(this.parseBrokenWorkflowsResponse).catch(function(e){console.error("Error fetching Broken Workflows:",e)})},e.prototype.restartAll=function(e){return r.a.post(Object({ENV:"production",NODE_ENV:"production",DEBUG_MODE:!1,API_KEY:"XXXX-XXXXX-XXXX-XXXX"}).API_NAME,[this.createJmxExecRequest(e,{operation:"restartAll()"})]).then(this.parseVoidResponse).catch(function(e){console.error("Error restarting broken workflows:",e)})},e.prototype.deleteAll=function(e,t){var n=this,o=t.map(function(t){return n.createJmxExecRequest(e,{operation:"deleteBroken",arguments:[t.id]})});return r.a.post(Object({ENV:"production",NODE_ENV:"production",DEBUG_MODE:!1,API_KEY:"XXXX-XXXXX-XXXX-XXXX"}).API_NAME,o).then(this.parseVoidResponse).catch(function(e){console.error("Error restarting broken workflows:",e)})},e.prototype.restart=function(e,t){return r.a.post(Object({ENV:"production",NODE_ENV:"production",DEBUG_MODE:!1,API_KEY:"XXXX-XXXXX-XXXX-XXXX"}).API_NAME,[this.createJmxExecRequest(e,{operation:"restart",arguments:[t]})]).then(this.parseVoidResponse).catch(function(e){console.error("Error restarting broken workflow:",e)})},e.prototype.deleteBroken=function(e,t){return r.a.post(Object({ENV:"production",NODE_ENV:"production",DEBUG_MODE:!1,API_KEY:"XXXX-XXXXX-XXXX-XXXX"}).API_NAME,[this.createJmxExecRequest(e,{operation:"deleteBroken",arguments:[t]})]).then(this.parseVoidResponse).catch(function(e){console.error("Error restarting broken workflow:",e)})},e.prototype.createEngineInfoRequest=function(e){return{type:"read",mbean:"copper.engine:name=persistent.engine",attribute:["EngineId","EngineType","State"],target:{url:"service:jmx:rmi:///jndi/rmi://"+e.host+":"+e.port+"/jmxrmi"}}},e.prototype.createQueryBrokenWFRequest=function(e,t,n){return this.createJmxExecRequest(e,{operation:"queryWorkflowInstances(javax.management.openmbean.CompositeData)",arguments:[this.createWorkflowFilter(e,[s.b.ERROR,s.b.INVALID],t,n)]})},e.prototype.createCountBrokenWFRequest=function(e){return this.createJmxExecRequest(e,{operation:"countWorkflowInstances(javax.management.openmbean.CompositeData)",arguments:[this.createWorkflowFilter(e,[s.b.ERROR,s.b.INVALID])]})},e.prototype.createEngineActivityRequest=function(e){return this.createJmxExecRequest(e,{operation:"queryEngineActivity",arguments:[e.fetchPeriod]})},e.prototype.createWorkflowFilter=function(e,t,n,o){void 0===n&&(n=50),void 0===o&&(o=0);var r=(new Date).getTime();return{states:t.map(function(e){return s.b[e]}),lastModTS:{from:null,to:r},creationTS:{from:null,to:r},processorPoolId:null,workflowClassname:null,max:n,offset:o}},e.prototype.createJmxExecRequest=function(e,t){return Object.assign(this.createJmxExecRequstBase(e.host,e.port),t)},e.prototype.createJmxExecRequstBase=function(e,t){return{type:"EXEC",mbean:"copper.engine:name=persistent.engine",target:{url:"service:jmx:rmi:///jndi/rmi://"+e+":"+t+"/jmxrmi"}}},e.prototype.isSubResponseValid=function(e){return!e.error&&(null!==e.value||void 0!==e.value)},e}()},"./src/store.vuex.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var o=n("./node_modules/vue/dist/vue.esm.js"),r=n("./node_modules/vuex/dist/vuex.esm.js"),s=n("./src/models/connectionSettings.ts");o.default.use(r.a);var i=new r.a.Store({state:{connectionSettings:new s.a,engineStatus:null},mutations:{updateConnectionSettings:function(e,t){console.log("updateConnectionSettings",t),e.connectionSettings=t},updateEngineStatus:function(e,t){console.log("updateEngineStatus",t),e.engineStatus=t}}})},"./src/util/hot-reload.ts":function(e,t,n){"use strict";var o=(n("./node_modules/vue/dist/vue.esm.js"),n("./node_modules/vue-hot-reload-api/dist/index.js"));n.n(o),this&&this.__awaiter,this&&this.__generator}},["./src/main.ts"]);